# 格式转换记录
到目前为止已经对 `anime.js` 中的 `tweens` 的加工部分做了处理，但是由于 `anime.js` 本身包含很多额外的处理，使得数据加工的过程不是很明朗，这里对数据转换过程做总结归纳，方便后续任务的推进

## tween 相关的数据转换过程
从最开始的配置开始，直到 `createAnimation` 中的 `normalizeTweens` 为止

### 最初的配置
初始化 animejs 时依赖的参数
```js
// tweens 格式化依赖的 settings
const settings = {
    offset: 0, duration: 1000, delay: 100,
    easing: 'easeOutElastic', elasticity: 500,
    round: 0
}

// 需要变化的参数
const params = {
    // 初始值
    targets: [{ aa: 0, bb: 100, cc: 100 }],
    
    // 目标值
    aa: 100,
    bb: [200, 300],
    cc: [200, 300, 400]
}
```

### 第一步格式化(properties)
_getProperties
```js
const aaTweens = [{ value: 100, ...settings }]
const bbTweens = [{ value: [200, 300], ...settings }]
const ccTweens = [
    { value: 200, duration: 1000/3, delay: 100, ...settings },
    { value: 300, duration: 1000/3, delay: 0, ...settings },
    { value: 400, duration: 1000/3, delay: 0, ...settings }
]
const properties = [
    { name: aa, offset: 0, tweens: aaTweens },
    { name: bb, offset: 0, tweens: bbTweens },
    { name: cc, offset: 0, tweens: ccTweens }
]
```

### animations 格式
_getAnimations
```js
const animatable = {
    id: 0, total: 1,
    target: { aa: 0, bb: 100, cc: 100 }
}
const animationA = {
    tweens: [{
        value: 100,
        from: { original: '0', numbers: [0], strings: [] },
        to: { original: '100', numbers: [100], strings: [] },
        start: 0, end: 1100, easing: function,
        duration: 1000, delay: 100,
        elasticity: (1000 - 500) / 1000
    }],
    type: 'Object',
    property: aa,
    animatable: animatable,
    duration: 1100,
    delay: 100
}
const animations = [

]
```

## 总结后的一些思路
当前的处理策略主要是：  
1. 将 `anime.js` 中的数据处理部分进行抽取做单独的处理(初期只做数字，后期加入 path 与 color)  
2. 分析 `anime.js` 中 `render` 思路，将 `render` 部分也做抽象处理，供自己构建 `render` 部分时参考使用